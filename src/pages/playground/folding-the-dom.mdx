---
title: Folding the DOM
slug: folding-the-dom
date: 2019-01-29
extract: In this post, we'll explore a technique we can use to "fold" a DOM node, like folding a letter in real-life. On that journey, we'll learn a lot about 3D transforms and CSS animation techniques!
tags: 
    - react
    - DOM
---
import {noInlineExample} from "./code/test.js";

In my day-to-day life as a front-end developer, I generally treat CSS as a collection of 2D layers. Other than reordering them using z-index, I don't often _move_ things in 3D space.

And yet, for years now, browsers have bundled in a surprisingly capable 3D CSS engine! Someone even built an experimental first-person shooter prototype using it ðŸ˜®

This effect could be useful in a number of scenarios:

- As a preloader for images. They unfold once they're ready, and the folded copy could use a much-lower-res base64-encoded version!
- As an on-mount animation when clicking to view an image, to add whimsical charm to an otherwise common feature.
- For JS game development


## ðŸŽ© CSS Houdini

CSS Houdini is a wide-ranging set of upcoming CSS enhancements predicated on one idea: developers should be able to create their own CSS features.

For example, CSS doesn't have any built-in way to do masonry layouts. Wouldn't it be cool if you could build it, plugging in directly to CSS mechanisms, and then access it with `display: masonry`?

For another example: projects like Babel allow us to "polyfill" (most) missing features in JS, because we can mimic those new features using an earlier version of the language. But we can't polyfill (most) CSS features. Houdini will allow us to polyfill in missing CSS, by giving us access to the internal wiring of the CSS engine.

CSS Houdini is a huge project, already years into research and development, and I expect it'll shape the future of web development in exciting and unpredictable ways. For today, though, I'd like to focus on one relatively small but incredibly cool part of this: _animated custom properties_.

<BlogImage src="https://images.ctfassets.net/r6v5z5ozsdfh/1GqB1d1yJBsdKp6eCtnL1k/590e9963909c697a3c807634e1861008/Screenshot_2020-07-25_at_02.58.32.png" className="full-bleed" caption="the image is full bleed"/>

## Animated custom properties

In CSS, a "property" is something you can assign a value. `display` and `transform` and `color` are all examples of properties. Why, then, are _variables_ in CSS called _custom properties_? Aren't they a totally different concept?

Actually, they're more similar than I realized. It's better to think of CSS variables as your own properties, like display and transform.

## ðŸŽ© CSS Houdini

CSS Houdini is a wide-ranging set of upcoming CSS enhancements predicated on one idea: developers should be able to create their own CSS features.

For example, CSS doesn't have any built-in way to do masonry layouts. Wouldn't it be cool if you could build it, plugging in directly to CSS mechanisms, and then access it with `display: masonry`?

For another example: projects like Babel allow us to "polyfill" (most) missing features in JS, because we can mimic those new features using an earlier version of the language. But we can't polyfill (most) CSS features. Houdini will allow us to polyfill in missing CSS, by giving us access to the internal wiring of the CSS engine.

CSS Houdini is a huge project, already years into research and development, and I expect it'll shape the future of web development in exciting and unpredictable ways. For today, though, I'd like to focus on one relatively small but incredibly cool part of this: _animated custom properties_.

## Animated custom properties

In CSS, a "property" is something you can assign a value. `display` and `transform` and `color` are all examples of properties. Why, then, are _variables_ in CSS called _custom properties_? Aren't they a totally different concept?

Actually, they're more similar than I realized. It's better to think of CSS variables as your own properties, like display and transform.

<Demo>
  <button>Hello Everone</button>
</Demo>

<LiveCodeEditor code={noInlineExample} id="folding-the-dom"/>